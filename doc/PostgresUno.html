<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: PostgresUno</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: PostgresUno</h1>

    




<section>

<header>
    
        <h2>PostgresUno</h2>
        
            <div class="class-description">Class that provides a single database connection to a Postgres server.This class uses the node-postgres module for it's underlying connection.The pg.Client property is exposed for those wanting to use advanced features.All class methods other than the getter above, return a Promise.See the node-postgres documentation:<a href="https://github.com/brianc/node-postgres">https://github.com/brianc/node-postgres</a> for more information.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="PostgresUno"><span class="type-signature"></span>new PostgresUno<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Create a new instance of the class.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="emitControl"><span class="type-signature"></span>emitControl<span class="type-signature"></span></h4>




<div class="description">
    Setter for the emit control object. Be default, emits occur forconnect, disconnect, error, query and warning (results is turned off). Forperformance reasons, these can be turned off by the user. Example: to disable queryand results emits only, set the value as such:{connect: true, disconnect: true, error: true, query: true, results: false, warning: true}
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line246">line 246</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="emitControl"><span class="type-signature"></span>emitControl<span class="type-signature"></span></h4>




<div class="description">
    Getter that returns the underlying emit control object.By default all emits other than results, are turned on.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line234">line 234</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="pgClient"><span class="type-signature"></span>pgClient<span class="type-signature"></span></h4>




<div class="description">
    Getter that returns the underlying node-postgres client object.This is useful for using advanced features of the former module,not exposed by this class.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line225">line 225</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="connect"><span class="type-signature"></span>connect<span class="signature">(connectionConfig)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Connect to a server using the provided query string or connect object.If the connect fails, the method rejects and an error event is emitted.If connect is called more than once, the new connection will be honored,but a warning event will be emitted. A connect event is emitted when resolved.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connectionConfig</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Passes the DB login parameters to the class.Can be an object or valid Postgres JDBC connection String
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>host</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>user</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>port</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    5432
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>database</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>string</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Instead of an object, a String of the form: 'postgresql://user:password@host:port/database' can be passed.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line55">line 55</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li><a href="PostgresUno.html#event:error">PostgresUno#event:error</a></li>

    <li><a href="PostgresUno.html#event:warning">PostgresUno#event:warning</a></li>

    <li><a href="PostgresUno.html#event:connect">PostgresUno#event:connect</a></li>
</ul>









<h5>Returns:</h5>

        
<div class="param-desc">
    if resolved, then connect was successful, else reject contains error string.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="disconnect"><span class="type-signature"></span>disconnect<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Used to disconnect from the Database. All cleanup procedures should call this. Typically your node process will not end normally if there is still a connection open. A disconnect event if emitted on successful call.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line153">line 153</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li><a href="PostgresUno.html#event:disconnect">PostgresUno#event:disconnect</a></li>
</ul>












        
            

    

    <h4 class="name" id="query"><span class="type-signature"></span>query<span class="signature">(sql)</span><span class="type-signature"> &rarr; {Promise|Object|String|Number|Array|Array}</span></h4>

    



<div class="description">
    Submit sql or ddl to be applied to the server. When resolved, the promise contains a results object. The format is documented somewhat in the return documentation below. If an error is detected, the method rejects and an error event is emitted. By default the query event is emitted when this method is called. The results event is emitted when the method resolves, but this feature is off by default.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sql</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Valid SQL or DDL to apply to the DB</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line127">line 127</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li><a href="PostgresUno.html#event:error">PostgresUno#event:error</a></li>

    <li><a href="PostgresUno.html#event:query">PostgresUno#event:query</a></li>

    <li><a href="PostgresUno.html#event:results">PostgresUno#event:results</a></li>
</ul>









<h5>Returns:</h5>
<ul>
        <li>
<div class="param-desc">
    - On success, the promise will be resolved and a data object will bereturned. The promise will be rejected and an error message returned on error.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    results - The returned data object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    results.command - The type of query submitted: 'SELECT', 'UPDATE', etc.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    results.rowCount - The number of rows returned.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    results.fields - An Array of Objects describing the columns returned. Usefullproperties are name, columnID, format ... ect.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    results.rows - An Array of Objects equal to the size of rowCount above. Eachobject contains properties matching the return column names.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>
</li>
    </ul>



        
    

    

    
        <h3 class="subsection-title">Events</h3>

        
            

    

    <h4 class="name" id="event:connect">connect</h4>

    



<div class="description">
    The connect event is only emitted when the connect method resolves.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line186">line 186</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="event:disconnect">disconnect</h4>

    



<div class="description">
    The disconnect event is only emitted when the disconnect method resolves.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line193">line 193</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="event:error">error</h4>

    



<div class="description">
    If an error is detected during connect(), disconnect() or query() calls,the method rejects the promise and an error event is emitted.It can be useful to listen to this event for easy debugging.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line170">line 170</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="event:query">query</h4>

    



<div class="description">
    The query event is emitted when the query method is called, but before thesubmission to the db. The object emitted has a Query property containing the sql. This is oftenuseful for debugging purposes.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">object</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line200">line 200</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="event:results">results</h4>

    



<div class="description">
    The results event is emitted when the query method has resolved.The event contains the results object. This emit is off by default.Use the emitControl setter to change the value, if desired.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">object</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line209">line 209</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="event:warning">warning</h4>

    



<div class="description">
    The warning event is only emitted when the connect method is called more than one time.
</div>





    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>


        </li>
    </ul>









<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="postgres-uno.js.html">postgres-uno.js</a>, <a href="postgres-uno.js.html#line179">line 179</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="PostgresUno.html">PostgresUno</a></li></ul><h3>Events</h3><ul><li><a href="PostgresUno.html#event:connect">connect</a></li><li><a href="PostgresUno.html#event:disconnect">disconnect</a></li><li><a href="PostgresUno.html#event:error">error</a></li><li><a href="PostgresUno.html#event:query">query</a></li><li><a href="PostgresUno.html#event:results">results</a></li><li><a href="PostgresUno.html#event:warning">warning</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Mon Oct 31 2016 14:12:40 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>